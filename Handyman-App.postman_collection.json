{
	"info": {
		"_postman_id": "handyman-auth-collection-2024",
		"name": "Handyman Management App - Complete Auth API",
		"description": "Complete authentication system with MongoDB integration, email verification, session management, 2FA, and admin approval for the Handyman Management App.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "handyman-api-v2"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://kleva-server.vercel.app",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		},
		{
			"key": "sessionId",
			"value": "",
			"type": "string"
		},
		{
			"key": "verificationToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "tempToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "handymanUserId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üè• Health & Documentation",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": ["{{baseUrl}}"],
							"path": ["health"]
						},
						"description": "Check API health status and get basic information."
					},
					"response": [
						{
							"name": "Health Check - Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/health",
									"host": ["{{baseUrl}}"],
									"path": ["health"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"status\": \"OK\",\n  \"message\": \"Handyman Management API is running\",\n  \"timestamp\": \"2024-10-18T10:30:00.000Z\"\n}"
						}
					]
				},
				{
					"name": "API Documentation",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api-docs",
							"host": ["{{baseUrl}}"],
							"path": ["api-docs"]
						},
						"description": "Access the interactive Swagger UI documentation."
					},
					"response": []
				},
				{
					"name": "OpenAPI Spec",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api-docs/openapi.json",
							"host": ["{{baseUrl}}"],
							"path": ["api-docs", "openapi.json"]
						},
						"description": "Get the OpenAPI specification in JSON format."
					},
					"response": []
				}
			],
			"description": "Health check and API documentation endpoints."
		},
		{
			"name": "üîê Authentication - Registration",
			"item": [
				{
					"name": "Register Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.userId) {",
									"        pm.collectionVariables.set('userId', response.userId);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"phone\": \"+2348012345678\",\n    \"address\": \"123 Main Street, Victoria Island, Lagos\",\n    \"preferredContactMethod\": \"email\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "register"]
						},
						"description": "Register a new customer account. Customer accounts are auto-approved after email verification."
					},
					"response": [
						{
							"name": "Register Customer - Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"phone\": \"+2348012345678\",\n    \"address\": \"123 Main Street, Victoria Island, Lagos\",\n    \"preferredContactMethod\": \"email\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/register",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "register"]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"User registered successfully. Please check your email to verify your account.\",\n  \"userId\": \"507f1f77bcf86cd799439011\"\n}"
						},
						{
							"name": "Register Customer - Email Exists",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"phone\": \"+2348012345678\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/register",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "register"]
								}
							},
							"status": "Conflict",
							"code": 409,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": false,\n  \"message\": \"Email already registered\"\n}"
						}
					]
				},
				{
					"name": "Register Handyman",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.userId) {",
									"        pm.collectionVariables.set('handymanUserId', response.userId);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"mike.smith@example.com\",\n  \"password\": \"HandyMan456!\",\n  \"role\": \"handyman\",\n  \"profile\": {\n    \"firstName\": \"Mike\",\n    \"lastName\": \"Smith\",\n    \"phone\": \"+2348098765432\",\n    \"address\": \"45 Carpenter Street, Ikeja, Lagos\",\n    \"skills\": [\"plumbing\", \"electrical\", \"carpentry\"],\n    \"experience\": 10,\n    \"hourlyRate\": 7500,\n    \"availability\": \"Monday to Saturday, 8AM - 6PM\",\n    \"bio\": \"Professional handyman with 10 years of experience in residential and commercial repairs.\",\n    \"certifications\": [\"Licensed Electrician\", \"Certified Plumber\"]\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "register"]
						},
						"description": "Register a new handyman account. Handyman accounts require admin approval after email verification."
					},
					"response": [
						{
							"name": "Register Handyman - Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"mike.smith@example.com\",\n  \"password\": \"HandyMan456!\",\n  \"role\": \"handyman\",\n  \"profile\": {\n    \"firstName\": \"Mike\",\n    \"lastName\": \"Smith\",\n    \"phone\": \"+2348098765432\",\n    \"address\": \"45 Carpenter Street, Ikeja, Lagos\",\n    \"skills\": [\"plumbing\", \"electrical\", \"carpentry\"],\n    \"experience\": 10,\n    \"hourlyRate\": 7500\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/register",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "register"]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"Handyman registered successfully. Please check your email to verify your account. Admin approval required.\",\n  \"userId\": \"507f1f77bcf86cd799439012\"\n}"
						}
					]
				},
				{
					"name": "Register Admin",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\",\n  \"role\": \"admin\",\n  \"profile\": {\n    \"firstName\": \"Admin\",\n    \"lastName\": \"User\",\n    \"phone\": \"+1234567892\",\n    \"department\": \"Management\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "register"]
						},
						"description": "Register a new admin account. Admin accounts are auto-approved after email verification."
					},
					"response": []
				},
				{
					"name": "Register Test User for Email Verification",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    console.log('‚úÖ Registration successful - check your email for verification link');",
									"    console.log('üìß The verification email should contain a link to verify the account');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"TestUser123!\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"firstName\": \"Test\",\n    \"lastName\": \"User\",\n    \"phone\": \"+1234567899\",\n    \"address\": \"123 Test St, Test City, TS\",\n    \"preferredContactMethod\": \"email\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "register"]
						},
						"description": "Register a test user to receive a real verification email with a valid token."
					},
					"response": []
				}
			],
			"description": "User registration endpoints for different roles."
		},
		{
			"name": "üìß Email Verification",
			"item": [
				{
					"name": "Verify Email",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/verify-email/{{verificationToken}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "verify-email", "{{verificationToken}}"]
						},
						"description": "Verify email address using verification token sent to user's email."
					},
					"response": []
				},
				{
					"name": "Test Email Verification (Seed Data)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/verify-email/test-verification-token-12345",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "verify-email", "test-verification-token-12345"]
						},
						"description": "Test email verification with a sample token. This will fail unless you update the seed data with this token."
					},
					"response": []
				},
				{
					"name": "Test Email Delivery",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    console.log('‚úÖ Test email sent successfully');",
									"    console.log('üìß Test token:', response.testToken);",
									"    console.log('üîó Verification URL:', response.verificationUrl);",
									"    pm.environment.set('testVerificationToken', response.testToken);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{testEmail}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/test-email",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "test-email"]
						},
						"description": "Test email delivery directly via Resend. Use this to debug email delivery issues."
					},
					"response": []
				}
			],
			"description": "Email verification endpoints."
		},
		{
			"name": "üîë Authentication - Login",
			"item": [
				{
					"name": "Login Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.tokens) {",
									"        pm.collectionVariables.set('accessToken', response.tokens.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.tokens.refreshToken);",
									"        pm.collectionVariables.set('userId', response.user.id);",
									"    }",
									"    if (response.requires2FA) {",
									"        pm.collectionVariables.set('tempToken', response.tempToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Login with customer credentials."
					},
					"response": [
						{
							"name": "Login Customer - Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/login",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "login"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"user\": {\n    \"id\": \"507f1f77bcf86cd799439011\",\n    \"email\": \"john.doe@example.com\",\n    \"role\": \"customer\",\n    \"isEmailVerified\": true,\n    \"is2FAEnabled\": false\n  },\n  \"tokens\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwicm9sZSI6ImN1c3RvbWVyIiwic2Vzc2lvbklkIjoiYWJjMTIzIiwiaWF0IjoxNjg4MjA1MDAwLCJleHAiOjE2ODgyMDU5MDB9...\",\n    \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwiaWF0IjoxNjg4MjA0ODAwLCJleHAiOjE2OTA3OTY4MDB9...\"\n  }\n}"
						},
						{
							"name": "Login - Invalid Credentials",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"WrongPassword123!\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/login",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "login"]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": false,\n  \"message\": \"Invalid email or password\"\n}"
						},
						{
							"name": "Login - 2FA Required",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/login",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "login"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"2FA code required\",\n  \"requires2FA\": true,\n  \"tempToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}"
						}
					]
				},
				{
					"name": "Login Handyman (Pending Approval)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{handymanEmail}}\",\n  \"password\": \"{{handymanPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Attempt to login with handyman credentials (should fail if pending approval)."
					},
					"response": []
				},
				{
					"name": "Login Approved Handyman",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.tokens) {",
									"        pm.collectionVariables.set('accessToken', response.tokens.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.tokens.refreshToken);",
									"        pm.collectionVariables.set('userId', response.user.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{approvedHandymanEmail}}\",\n  \"password\": \"{{approvedHandymanPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Login with approved handyman credentials."
					},
					"response": []
				},
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.tokens) {",
									"        pm.collectionVariables.set('accessToken', response.tokens.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.tokens.refreshToken);",
									"        pm.collectionVariables.set('userId', response.user.id);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Login with admin credentials."
					},
					"response": []
				}
			],
			"description": "User login endpoints for different roles."
		},
		{
			"name": "üîÑ Token Management",
			"item": [
				{
					"name": "Refresh Access Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.accessToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/refresh",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "refresh"]
						},
						"description": "Refresh expired access token using refresh token."
					},
					"response": []
				},
				{
					"name": "Get Token Info",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/token-info",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "token-info"]
						},
						"description": "Get information about the current access token."
					},
					"response": []
				}
			],
			"description": "Token management endpoints."
		},
		{
			"name": "üë§ User Profile Management",
			"item": [
				{
					"name": "Get Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "me"]
						},
						"description": "Get current user profile information."
					},
					"response": [
						{
							"name": "Get Profile - Customer",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/me",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "me"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"email\": \"john.doe@example.com\",\n    \"role\": \"customer\",\n    \"profile\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"phone\": \"+2348012345678\",\n      \"address\": \"123 Main Street, Victoria Island, Lagos\",\n      \"preferredContactMethod\": \"email\"\n    },\n    \"isEmailVerified\": true,\n    \"is2FAEnabled\": false,\n    \"isActive\": true,\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-10-15T14:20:00.000Z\"\n  }\n}"
						},
						{
							"name": "Get Profile - Handyman",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/me",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "me"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"data\": {\n    \"_id\": \"507f1f77bcf86cd799439012\",\n    \"email\": \"mike.smith@example.com\",\n    \"role\": \"handyman\",\n    \"approvalStatus\": \"approved\",\n    \"profile\": {\n      \"firstName\": \"Mike\",\n      \"lastName\": \"Smith\",\n      \"phone\": \"+2348098765432\",\n      \"address\": \"45 Carpenter Street, Ikeja, Lagos\",\n      \"skills\": [\"plumbing\", \"electrical\", \"carpentry\"],\n      \"hourlyRate\": 7500,\n      \"experience\": 10,\n      \"availability\": \"Monday to Saturday, 8AM - 6PM\",\n      \"bio\": \"Professional handyman with 10 years of experience\",\n      \"certifications\": [\"Licensed Electrician\", \"Certified Plumber\"]\n    },\n    \"isEmailVerified\": true,\n    \"is2FAEnabled\": true,\n    \"isActive\": true,\n    \"createdAt\": \"2024-02-20T08:15:00.000Z\",\n    \"updatedAt\": \"2024-10-18T09:45:00.000Z\"\n  }\n}"
						}
					]
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"profile\": {\n    \"phone\": \"+2348012345679\",\n    \"address\": \"456 New Address, Lekki, Lagos\",\n    \"preferredContactMethod\": \"phone\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "me"]
						},
						"description": "Update current user profile information."
					},
					"response": [
						{
							"name": "Update Profile - Success",
							"originalRequest": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"profile\": {\n    \"phone\": \"+2348012345679\",\n    \"address\": \"456 New Address, Lekki, Lagos\",\n    \"preferredContactMethod\": \"phone\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/me",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "me"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"Profile updated successfully\",\n  \"data\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"email\": \"john.doe@example.com\",\n    \"role\": \"customer\",\n    \"profile\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"phone\": \"+2348012345679\",\n      \"address\": \"456 New Address, Lekki, Lagos\",\n      \"preferredContactMethod\": \"phone\"\n    },\n    \"isEmailVerified\": true,\n    \"is2FAEnabled\": false,\n    \"isActive\": true,\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-10-18T10:30:00.000Z\"\n  }\n}"
						}
					]
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"Customer123!\",\n  \"newPassword\": \"NewCustomer123!\",\n  \"confirmPassword\": \"NewCustomer123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/change-password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "change-password"]
						},
						"description": "Change user password."
					},
					"response": []
				}
			],
			"description": "User profile management endpoints."
		},
		{
			"name": "üîê Two-Factor Authentication",
			"item": [
				{
					"name": "Enable 2FA",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"password\": \"SecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/2fa/enable",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "2fa", "enable"]
						},
						"description": "Enable 2FA for the current user. Returns QR code and backup codes."
					},
					"response": [
						{
							"name": "Enable 2FA - Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"password\": \"SecurePass123!\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/2fa/enable",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "2fa", "enable"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"secret\": \"JBSWY3DPEHPK3PXP\",\n  \"qrCodeUrl\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51...\",\n  \"backupCodes\": [\n    \"12345678\",\n    \"23456789\",\n    \"34567890\",\n    \"45678901\",\n    \"56789012\",\n    \"67890123\",\n    \"78901234\",\n    \"89012345\",\n    \"90123456\",\n    \"01234567\"\n  ],\n  \"message\": \"Scan the QR code with your authenticator app and enter the verification code\"\n}"
						}
					]
				},
				{
					"name": "Verify 2FA Setup",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/2fa/verify",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "2fa", "verify"]
						},
						"description": "Verify 2FA setup with TOTP token from authenticator app."
					},
					"response": []
				},
				{
					"name": "Login with 2FA",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{customerEmail}}\",\n  \"password\": \"{{customerPassword}}\",\n  \"twoFactorToken\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						},
						"description": "Login with 2FA token for users who have 2FA enabled."
					},
					"response": []
				},
				{
					"name": "Disable 2FA",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"password\": \"Customer123!\",\n  \"twoFactorToken\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/2fa/disable",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "2fa", "disable"]
						},
						"description": "Disable 2FA for the current user."
					},
					"response": []
				}
			],
			"description": "Two-factor authentication endpoints."
		},
		{
			"name": "üîë Session Management",
			"item": [
				{
					"name": "Get Active Sessions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/sessions",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "sessions"]
						},
						"description": "Get all active sessions for the current user."
					},
					"response": [
						{
							"name": "Get Active Sessions - Success",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/sessions",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "sessions"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"sessionId\": \"sess_abc123xyz\",\n      \"deviceInfo\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/118.0.0.0\",\n      \"ipAddress\": \"192.168.1.100\",\n      \"lastActivity\": \"2024-10-18T10:30:00.000Z\",\n      \"createdAt\": \"2024-10-18T08:00:00.000Z\"\n    },\n    {\n      \"sessionId\": \"sess_def456uvw\",\n      \"deviceInfo\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) Safari/605.1.15\",\n      \"ipAddress\": \"192.168.1.101\",\n      \"lastActivity\": \"2024-10-17T15:20:00.000Z\",\n      \"createdAt\": \"2024-10-15T09:30:00.000Z\"\n    }\n  ]\n}"
						}
					]
				},
				{
					"name": "Revoke Specific Session",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/sessions/{{sessionId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "sessions", "{{sessionId}}"]
						},
						"description": "Revoke a specific session by session ID."
					},
					"response": []
				},
				{
					"name": "Revoke All Sessions",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/sessions",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "sessions"]
						},
						"description": "Revoke all sessions for the current user."
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/logout",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "logout"]
						},
						"description": "Logout and revoke current session."
					},
					"response": []
				}
			],
			"description": "Session management endpoints."
		},
		{
			"name": "üîí Password Reset",
			"item": [
				{
					"name": "Request Password Reset",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.doe@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/forgot-password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "forgot-password"]
						},
						"description": "Request password reset email."
					},
					"response": [
						{
							"name": "Request Password Reset - Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"john.doe@example.com\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/v1/auth/forgot-password",
									"host": ["{{baseUrl}}"],
									"path": ["api", "v1", "auth", "forgot-password"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"If an account with this email exists, a password reset link has been sent.\"\n}"
						}
					]
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{resetToken}}\",\n  \"newPassword\": \"NewPassword123!\",\n  \"confirmPassword\": \"NewPassword123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/reset-password/{{resetToken}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "reset-password", "{{resetToken}}"]
						},
						"description": "Reset password using reset token from email."
					},
					"response": []
				}
			],
			"description": "Password reset endpoints."
		},
		{
			"name": "üëë Admin - Handyman Approval",
			"item": [
				{
					"name": "Get Pending Handymen",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/admin/pending-handymen",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "admin", "pending-handymen"]
						},
						"description": "Get all handymen pending approval (Admin only)."
					},
					"response": []
				},
				{
					"name": "Approve Handyman",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/admin/approve-handyman/{{handymanUserId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "admin", "approve-handyman", "{{handymanUserId}}"]
						},
						"description": "Approve a handyman account (Admin only)."
					},
					"response": []
				},
				{
					"name": "Reject Handyman",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Insufficient experience and incomplete profile\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/admin/reject-handyman/{{handymanUserId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "admin", "reject-handyman", "{{handymanUserId}}"]
						},
						"description": "Reject a handyman account with reason (Admin only)."
					},
					"response": []
				}
			],
			"description": "Admin endpoints for managing handyman approvals."
		},
		{
			"name": "üìä User Statistics",
			"item": [
				{
					"name": "Get User Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/users/stats",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "users", "stats"]
						},
						"description": "Get user statistics (public endpoint)."
					},
					"response": []
				}
			],
			"description": "User statistics and analytics endpoints."
		},
		{
			"name": "üí≥ Payments",
			"item": [
				{
					"name": "Initialize Job Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 15000,\n  \"jobId\": \"job_abc123xyz\",\n  \"jobTitle\": \"Kitchen Sink Repair\",\n  \"handymanId\": \"{{handymanUserId}}\",\n  \"customerId\": \"{{userId}}\",\n  \"metadata\": {\n    \"jobType\": \"Plumbing\",\n    \"location\": \"Lekki Phase 1, Lagos\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/initialize-job",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "initialize-job"]
						},
						"description": "Initialize a job payment with Paystack."
					},
					"response": []
				},
				{
					"name": "Initialize Subscription Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 5000,\n  \"plan\": \"monthly\",\n  \"metadata\": {\n    \"userId\": \"{{userId}}\",\n    \"tier\": \"premium\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/initialize-subscription",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "initialize-subscription"]
						},
						"description": "Initialize a subscription payment for premium features."
					},
					"response": []
				},
				{
					"name": "Verify Payment",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/verify/:reference",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "verify", ":reference"],
							"variable": [
								{
									"key": "reference",
									"value": "PAY_abc123xyz789",
									"description": "Payment reference from Paystack"
								}
							]
						},
						"description": "Verify a payment transaction status."
					},
					"response": []
				},
				{
					"name": "Get Payment History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/history?limit=10&page=1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "history"],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "page",
									"value": "1"
								}
							]
						},
						"description": "Get payment history for the authenticated user."
					},
					"response": []
				},
				{
					"name": "Get Payment Statistics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/stats?startDate=2024-01-01&endDate=2024-12-31",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "stats"],
							"query": [
								{
									"key": "startDate",
									"value": "2024-01-01"
								},
								{
									"key": "endDate",
									"value": "2024-12-31"
								}
							]
						},
						"description": "Get payment statistics for a date range."
					},
					"response": []
				},
				{
					"name": "Get Supported Banks",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/banks",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "banks"]
						},
						"description": "Get list of supported Nigerian banks."
					},
					"response": []
				},
				{
					"name": "Create Transfer Recipient",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"accountNumber\": \"0123456789\",\n  \"bankCode\": \"058\",\n  \"accountName\": \"Chukwuemeka Okafor\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/transfer-recipient",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "transfer-recipient"]
						},
						"description": "Create a transfer recipient for receiving payouts."
					},
					"response": []
				},
				{
					"name": "Payout to Handyman (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"handymanId\": \"{{handymanUserId}}\",\n  \"amount\": 150000,\n  \"reason\": \"Payment for completed job: Kitchen Sink Repair\",\n  \"recipientCode\": \"RCP_abc123xyz789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/payout-handyman",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "payout-handyman"]
						},
						"description": "Process a payout to a handyman (Admin only)."
					},
					"response": []
				},
				{
					"name": "Paystack Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"event\": \"charge.success\",\n  \"data\": {\n    \"id\": 302961,\n    \"domain\": \"live\",\n    \"status\": \"success\",\n    \"reference\": \"PAY_abc123xyz789\",\n    \"amount\": 1500000,\n    \"message\": \"Approved\",\n    \"gateway_response\": \"Successful\",\n    \"paid_at\": \"2024-10-18T10:05:30.000Z\",\n    \"created_at\": \"2024-10-18T10:00:00.000Z\",\n    \"channel\": \"card\",\n    \"currency\": \"NGN\",\n    \"metadata\": {\n      \"jobId\": \"job_abc123xyz\",\n      \"jobTitle\": \"Kitchen Sink Repair\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/payments/webhook",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "payments", "webhook"]
						},
						"description": "Webhook endpoint for Paystack payment notifications (for testing only)."
					},
					"response": []
				}
			],
			"description": "Payment processing, verification, and payout endpoints."
		},
		{
			"name": "üß™ Test Endpoints",
			"item": [
				{
					"name": "Test Resend Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"subject\": \"Test Email\",\n  \"message\": \"This is a test email from the Handyman API.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/test-resend",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "test-resend"]
						},
						"description": "Test email sending functionality."
					},
					"response": []
				}
			],
			"description": "Test and utility endpoints."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-refresh token if expired",
					"if (pm.collectionVariables.get('refreshToken')) {",
					"    // Check if access token is expired",
					"    const accessToken = pm.collectionVariables.get('accessToken');",
					"    if (accessToken) {",
					"        try {",
					"            const payload = JSON.parse(atob(accessToken.split('.')[1]));",
					"            const now = Math.floor(Date.now() / 1000);",
					"            if (payload.exp && payload.exp < now + 60) { // Refresh if expires in 1 minute",
					"                pm.sendRequest({",
					"                    url: pm.collectionVariables.get('baseUrl') + '/api/v1/auth/refresh',",
					"                    method: 'POST',",
					"                    header: {",
					"                        'Content-Type': 'application/json'",
					"                    },",
					"                    body: {",
					"                        mode: 'raw',",
					"                        raw: JSON.stringify({",
					"                            refreshToken: pm.collectionVariables.get('refreshToken')",
					"                        })",
					"                    }",
					"                }, function (err, response) {",
					"                    if (response && response.json() && response.json().accessToken) {",
					"                        pm.collectionVariables.set('accessToken', response.json().accessToken);",
					"                    }",
					"                });",
					"            }",
					"        } catch (e) {",
					"            // Token is invalid, will need to re-login",
					"        }",
					"    }",
					"}"
				]
			}
		}
	]
}

{
	"openapi": "3.0.0",
	"info": {
		"title": "Handyman Management API",
		"description": "Comprehensive authentication system with 2FA, email verification, password reset, session management, and Paystack payment integration for the Handyman Management Platform.",
		"version": "1.0.0",
		"contact": {
			"name": "API Support",
			"email": "support@handyman-app.com"
		}
	},
	"servers": [
		{
			"url": "http://localhost:3006",
			"description": "Development server"
		},
		{
			"url": "https://api.handyman-app.com",
			"description": "Production server"
		}
	],
	"tags": [
		{
			"name": "Authentication",
			"description": "User registration, login, and authentication operations"
		},
		{
			"name": "Password Management",
			"description": "Password reset and change operations"
		},
		{
			"name": "Profile",
			"description": "User profile operations"
		},
		{
			"name": "Two-Factor Authentication",
			"description": "2FA setup and management"
		},
		{
			"name": "Session Management",
			"description": "Multi-device session operations"
		},
		{
			"name": "Payments",
			"description": "Payment processing with Paystack integration"
		},
		{
			"name": "Health",
			"description": "API health check"
		}
	],
	"paths": {
		"/api/v1/auth/register": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Register new user",
				"description": "Create a new user account (customer, handyman, or admin). Email verification required before login.",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"oneOf": [
									{ "$ref": "#/components/schemas/RegisterCustomer" },
									{ "$ref": "#/components/schemas/RegisterHandyman" },
									{ "$ref": "#/components/schemas/RegisterAdmin" }
								]
							},
							"examples": {
								"customer": {
									"summary": "Register as customer",
									"value": {
										"email": "john.doe@example.com",
										"password": "SecurePass123!",
										"confirmPassword": "SecurePass123!",
										"role": "customer",
										"profile": {
											"firstName": "John",
											"lastName": "Doe",
											"phone": "+2348012345678",
											"address": "123 Main Street, Victoria Island, Lagos",
											"preferredContactMethod": "email"
										}
									}
								},
								"handyman": {
									"summary": "Register as handyman",
									"value": {
										"email": "mike.smith@example.com",
										"password": "HandyMan456!",
										"confirmPassword": "HandyMan456!",
										"role": "handyman",
										"profile": {
											"firstName": "Mike",
											"lastName": "Smith",
											"phone": "+2348098765432",
											"address": "45 Carpenter Street, Ikeja, Lagos",
											"skills": ["plumbing", "electrical", "carpentry"],
											"hourlyRate": 7500,
											"experience": 10,
											"availability": "Monday to Saturday, 8AM - 6PM",
											"bio": "Professional handyman with 10 years of experience in residential and commercial repairs.",
											"certifications": ["Licensed Electrician", "Certified Plumber"]
										}
									}
								},
								"admin": {
									"summary": "Register as admin",
									"value": {
										"email": "admin@handyman-app.com",
										"password": "AdminSecure789!",
										"confirmPassword": "AdminSecure789!",
										"role": "admin",
										"profile": {
											"firstName": "Sarah",
											"lastName": "Johnson",
											"phone": "+2348087654321",
											"department": "Operations"
										}
									}
								}
							}
						}
					}
				},
				"responses": {
					"201": {
						"description": "Registration successful - Verification email sent",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/RegisterResponse"
								},
								"example": {
									"success": true,
									"message": "User registered successfully. Please check your email to verify your account.",
									"userId": "507f1f77bcf86cd799439011"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"409": {
						"description": "Conflict - Email already exists",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Email already registered"
								}
							}
						}
					},
					"429": {
						"$ref": "#/components/responses/TooManyRequests"
					}
				}
			}
		},
		"/api/v1/auth/verify-email/{token}": {
			"get": {
				"tags": ["Authentication"],
				"summary": "Verify email address",
				"description": "Verify user's email using token sent to their email",
				"parameters": [
					{
						"name": "token",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Email verification token",
						"example": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6"
					}
				],
				"responses": {
					"200": {
						"description": "Email verified successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Email verified successfully. You can now log in."
								}
							}
						}
					},
					"400": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Invalid or expired verification token"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/auth/login": {
			"post": {
				"tags": ["Authentication"],
				"summary": "User login",
				"description": "Authenticate user with email and password. Returns access and refresh tokens.",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/LoginRequest"
							},
							"examples": {
								"basicLogin": {
									"summary": "Basic login",
									"value": {
										"email": "john.doe@example.com",
										"password": "SecurePass123!"
									}
								},
								"loginWith2FA": {
									"summary": "Login with 2FA code",
									"value": {
										"email": "john.doe@example.com",
										"password": "SecurePass123!",
										"twoFactorCode": "123456"
									}
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Login successful",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/LoginResponse"
								},
								"examples": {
									"successfulLogin": {
										"summary": "Successful login",
										"value": {
											"success": true,
											"message": "Login successful",
											"user": {
												"id": "507f1f77bcf86cd799439011",
												"email": "john.doe@example.com",
												"role": "customer",
												"isEmailVerified": true,
												"is2FAEnabled": false
											},
											"tokens": {
												"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
												"refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
											}
										}
									},
									"requires2FA": {
										"summary": "2FA required",
										"value": {
											"success": true,
											"message": "2FA code required",
											"requires2FA": true,
											"tempToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized - Invalid credentials",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"examples": {
									"invalidCredentials": {
										"summary": "Invalid credentials",
										"value": {
											"success": false,
											"message": "Invalid email or password"
										}
									},
									"emailNotVerified": {
										"summary": "Email not verified",
										"value": {
											"success": false,
											"message": "Please verify your email before logging in"
										}
									},
									"invalid2FA": {
										"summary": "Invalid 2FA code",
										"value": {
											"success": false,
											"message": "Invalid 2FA code"
										}
									}
								}
							}
						}
					},
					"429": {
						"$ref": "#/components/responses/TooManyRequests"
					}
				}
			}
		},
		"/api/v1/auth/refresh": {
			"post": {
				"tags": ["Authentication"],
				"summary": "Refresh access token",
				"description": "Get new access token using refresh token",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["refreshToken"],
								"properties": {
									"refreshToken": {
										"type": "string",
										"description": "Refresh token received from login"
									}
								}
							},
							"example": {
								"refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwicm9sZSI6ImN1c3RvbWVyIiwiaWF0IjoxNjg4MjA0ODAwLCJleHAiOjE2OTA3OTY4MDB9.abc123xyz..."
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Token refreshed successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"accessToken": { "type": "string" }
									}
								},
								"example": {
									"success": true,
									"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwicm9sZSI6ImN1c3RvbWVyIiwic2Vzc2lvbklkIjoiYWJjMTIzIiwiaWF0IjoxNjg4MjA1MDAwLCJleHAiOjE2ODgyMDU5MDB9.def456uvw..."
								}
							}
						}
					},
					"401": {
						"description": "Invalid or expired refresh token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Invalid or expired refresh token"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/auth/logout": {
			"post": {
				"tags": ["Authentication"],
				"summary": "User logout",
				"description": "Logout and revoke current session",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"refreshToken": {
										"type": "string",
										"description": "Optional refresh token to revoke"
									}
								}
							},
							"example": {
								"refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Logged out successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Logged out successfully"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/forgot-password": {
			"post": {
				"tags": ["Password Management"],
				"summary": "Request password reset",
				"description": "Send password reset link to user's email",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["email"],
								"properties": {
									"email": {
										"type": "string",
										"format": "email"
									}
								}
							},
							"example": {
								"email": "john.doe@example.com"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "If email exists, reset link sent",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "If an account with this email exists, a password reset link has been sent."
								}
							}
						}
					},
					"429": {
						"$ref": "#/components/responses/TooManyRequests"
					}
				}
			}
		},
		"/api/v1/auth/reset-password/{token}": {
			"put": {
				"tags": ["Password Management"],
				"summary": "Reset password",
				"description": "Reset password using token from email",
				"parameters": [
					{
						"name": "token",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Password reset token",
						"example": "z9y8x7w6v5u4t3s2r1q0p9o8n7m6l5k4j3i2h1g0f9e8d7c6b5a4"
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["newPassword", "confirmPassword"],
								"properties": {
									"newPassword": {
										"type": "string",
										"minLength": 8,
										"pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)",
										"description": "Must contain uppercase, lowercase, and number"
									},
									"confirmPassword": {
										"type": "string",
										"description": "Must match newPassword"
									}
								}
							},
							"example": {
								"newPassword": "NewSecurePass456!",
								"confirmPassword": "NewSecurePass456!"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Password reset successful",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Password reset successfully. You can now log in with your new password."
								}
							}
						}
					},
					"400": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"examples": {
									"invalidToken": {
										"summary": "Invalid token",
										"value": {
											"success": false,
											"message": "Invalid or expired password reset token"
										}
									},
									"weakPassword": {
										"summary": "Weak password",
										"value": {
											"success": false,
											"message": "Password must be at least 8 characters and contain uppercase, lowercase, and number"
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/auth/change-password": {
			"post": {
				"tags": ["Password Management"],
				"summary": "Change password",
				"description": "Change password while logged in",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/ChangePasswordRequest"
							},
							"example": {
								"currentPassword": "SecurePass123!",
								"newPassword": "NewSecurePass456!",
								"confirmPassword": "NewSecurePass456!"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Password changed successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Password changed successfully"
								}
							}
						}
					},
					"400": {
						"description": "Bad request - Validation error or password mismatch",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"examples": {
									"incorrectPassword": {
										"summary": "Incorrect current password",
										"value": {
											"success": false,
											"message": "Current password is incorrect"
										}
									},
									"passwordMismatch": {
										"summary": "Passwords don't match",
										"value": {
											"success": false,
											"message": "New password and confirm password do not match"
										}
									}
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/me": {
			"get": {
				"tags": ["Profile"],
				"summary": "Get current user profile",
				"description": "Retrieve authenticated user's profile information",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Profile retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"data": { "$ref": "#/components/schemas/User" }
									}
								},
								"examples": {
									"customer": {
										"summary": "Customer profile",
										"value": {
											"success": true,
											"data": {
												"_id": "507f1f77bcf86cd799439011",
												"email": "john.doe@example.com",
												"role": "customer",
												"profile": {
													"firstName": "John",
													"lastName": "Doe",
													"phone": "+2348012345678",
													"address": "123 Main Street, Victoria Island, Lagos",
													"preferredContactMethod": "email"
												},
												"isEmailVerified": true,
												"is2FAEnabled": false,
												"isActive": true,
												"createdAt": "2024-01-15T10:30:00.000Z",
												"updatedAt": "2024-10-15T14:20:00.000Z"
											}
										}
									},
									"handyman": {
										"summary": "Handyman profile",
										"value": {
											"success": true,
											"data": {
												"_id": "507f1f77bcf86cd799439012",
												"email": "mike.smith@example.com",
												"role": "handyman",
												"approvalStatus": "approved",
												"profile": {
													"firstName": "Mike",
													"lastName": "Smith",
													"phone": "+2348098765432",
													"address": "45 Carpenter Street, Ikeja, Lagos",
													"skills": ["plumbing", "electrical", "carpentry"],
													"hourlyRate": 7500,
													"experience": 10,
													"availability": "Monday to Saturday, 8AM - 6PM",
													"bio": "Professional handyman with 10 years of experience",
													"certifications": ["Licensed Electrician", "Certified Plumber"]
												},
												"isEmailVerified": true,
												"is2FAEnabled": true,
												"isActive": true,
												"createdAt": "2024-02-20T08:15:00.000Z",
												"updatedAt": "2024-10-18T09:45:00.000Z"
											}
										}
									}
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			},
			"patch": {
				"tags": ["Profile"],
				"summary": "Update user profile",
				"description": "Update user profile information",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"profile": {
										"type": "object",
										"description": "Profile fields to update"
									}
								}
							},
							"examples": {
								"updateCustomer": {
									"summary": "Update customer profile",
									"value": {
										"profile": {
											"phone": "+2348012345679",
											"address": "456 New Address, Lekki, Lagos",
											"preferredContactMethod": "phone"
										}
									}
								},
								"updateHandyman": {
									"summary": "Update handyman profile",
									"value": {
										"profile": {
											"hourlyRate": 8500,
											"skills": ["plumbing", "electrical", "carpentry", "painting"],
											"availability": "Monday to Sunday, 7AM - 7PM",
											"bio": "Experienced handyman with over 10 years in the field"
										}
									}
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Profile updated successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"data": { "$ref": "#/components/schemas/User" }
									}
								},
								"example": {
									"success": true,
									"message": "Profile updated successfully",
									"data": {
										"_id": "507f1f77bcf86cd799439011",
										"email": "john.doe@example.com",
										"role": "customer",
										"profile": {
											"firstName": "John",
											"lastName": "Doe",
											"phone": "+2348012345679",
											"address": "456 New Address, Lekki, Lagos",
											"preferredContactMethod": "phone"
										},
										"isEmailVerified": true,
										"is2FAEnabled": false,
										"isActive": true,
										"createdAt": "2024-01-15T10:30:00.000Z",
										"updatedAt": "2024-10-18T10:30:00.000Z"
									}
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/2fa/enable": {
			"post": {
				"tags": ["Two-Factor Authentication"],
				"summary": "Enable 2FA",
				"description": "Generate QR code and backup codes for 2FA setup",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["password"],
								"properties": {
									"password": {
										"type": "string",
										"description": "User password for verification"
									}
								}
							},
							"example": {
								"password": "SecurePass123!"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "2FA setup initiated",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/Enable2FAResponse"
								},
								"example": {
									"success": true,
									"secret": "JBSWY3DPEHPK3PXP",
									"qrCodeUrl": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51...",
									"backupCodes": [
										"12345678",
										"23456789",
										"34567890",
										"45678901",
										"56789012",
										"67890123",
										"78901234",
										"89012345",
										"90123456",
										"01234567"
									],
									"message": "Scan the QR code with your authenticator app and enter the verification code"
								}
							}
						}
					},
					"400": {
						"description": "Invalid password or 2FA already enabled",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"examples": {
									"invalidPassword": {
										"summary": "Invalid password",
										"value": {
											"success": false,
											"message": "Invalid password"
										}
									},
									"alreadyEnabled": {
										"summary": "2FA already enabled",
										"value": {
											"success": false,
											"message": "2FA is already enabled"
										}
									}
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/2fa/verify": {
			"post": {
				"tags": ["Two-Factor Authentication"],
				"summary": "Verify and complete 2FA setup",
				"description": "Verify 2FA code from authenticator app to complete setup",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["token"],
								"properties": {
									"token": {
										"type": "string",
										"minLength": 6,
										"maxLength": 6,
										"description": "6-digit code from authenticator app"
									}
								}
							},
							"example": {
								"token": "123456"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "2FA enabled successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Two-factor authentication enabled successfully"
								}
							}
						}
					},
					"400": {
						"description": "Invalid 2FA code",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Invalid 2FA code"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"429": {
						"$ref": "#/components/responses/TooManyRequests"
					}
				}
			}
		},
		"/api/v1/auth/2fa/disable": {
			"post": {
				"tags": ["Two-Factor Authentication"],
				"summary": "Disable 2FA",
				"description": "Disable two-factor authentication",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["password"],
								"properties": {
									"password": {
										"type": "string"
									},
									"twoFactorCode": {
										"type": "string",
										"description": "Optional 2FA code"
									}
								}
							},
							"examples": {
								"withCode": {
									"summary": "Disable with 2FA code",
									"value": {
										"password": "SecurePass123!",
										"twoFactorCode": "123456"
									}
								},
								"withoutCode": {
									"summary": "Disable without 2FA code",
									"value": {
										"password": "SecurePass123!"
									}
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "2FA disabled successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Two-factor authentication disabled successfully"
								}
							}
						}
					},
					"400": {
						"description": "Invalid password or 2FA code",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Invalid password"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/sessions": {
			"get": {
				"tags": ["Session Management"],
				"summary": "Get all active sessions",
				"description": "Retrieve all active sessions for current user",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Sessions retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"data": {
											"type": "array",
											"items": { "$ref": "#/components/schemas/Session" }
										}
									}
								},
								"example": {
									"success": true,
									"data": [
										{
											"sessionId": "sess_abc123xyz",
											"deviceInfo": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/118.0.0.0",
											"ipAddress": "192.168.1.100",
											"lastActivity": "2024-10-18T10:30:00.000Z",
											"createdAt": "2024-10-18T08:00:00.000Z"
										},
										{
											"sessionId": "sess_def456uvw",
											"deviceInfo": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) Safari/605.1.15",
											"ipAddress": "192.168.1.101",
											"lastActivity": "2024-10-17T15:20:00.000Z",
											"createdAt": "2024-10-15T09:30:00.000Z"
										}
									]
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			},
			"delete": {
				"tags": ["Session Management"],
				"summary": "Revoke all sessions",
				"description": "Logout from all devices",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "All sessions revoked",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "All sessions revoked successfully"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/sessions/{sessionId}": {
			"delete": {
				"tags": ["Session Management"],
				"summary": "Revoke specific session",
				"description": "Logout from specific device",
				"security": [{ "BearerAuth": [] }],
				"parameters": [
					{
						"name": "sessionId",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Session ID to revoke",
						"example": "sess_def456uvw"
					}
				],
				"responses": {
					"200": {
						"description": "Session revoked successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Session revoked successfully"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"403": {
						"description": "Forbidden - Not authorized to revoke this session",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Not authorized to revoke this session"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/payments/initialize-job": {
			"post": {
				"tags": ["Payments"],
				"summary": "Initialize job payment",
				"description": "Initialize payment for a job service",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/InitializePaymentRequest"
							},
							"examples": {
								"plumbingJob": {
									"summary": "Plumbing service payment",
									"value": {
										"jobId": "job_abc123xyz",
										"amount": 1500000,
										"description": "Payment for plumbing service - Kitchen sink repair",
										"metadata": {
											"jobTitle": "Kitchen Sink Repair",
											"handymanId": "507f1f77bcf86cd799439012",
											"estimatedDuration": "2 hours"
										}
									}
								},
								"electricalJob": {
									"summary": "Electrical service payment",
									"value": {
										"jobId": "job_def456uvw",
										"amount": 2500000,
										"description": "Payment for electrical service - House rewiring",
										"metadata": {
											"jobTitle": "House Rewiring",
											"handymanId": "507f1f77bcf86cd799439013",
											"estimatedDuration": "5 hours"
										}
									}
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Payment initialized successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PaymentInitResponse"
								},
								"example": {
									"success": true,
									"message": "Payment initialized successfully",
									"data": {
										"id": "pay_xyz789abc",
										"reference": "PAY_abc123xyz789",
										"accessCode": "zyx987wvu654",
										"authorizationUrl": "https://checkout.paystack.com/zyx987wvu654",
										"amount": 1500000,
										"currency": "NGN",
										"status": "pending"
									}
								}
							}
						}
					},
					"400": {
						"description": "Invalid payment data",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Amount must be at least ₦1.00 (100 kobo)"
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/payments/verify/{reference}": {
			"get": {
				"tags": ["Payments"],
				"summary": "Verify payment",
				"description": "Verify payment status using Paystack reference",
				"parameters": [
					{
						"name": "reference",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Paystack payment reference",
						"example": "PAY_abc123xyz789"
					}
				],
				"responses": {
					"200": {
						"description": "Payment verified",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PaymentVerifyResponse"
								},
								"examples": {
									"successful": {
										"summary": "Successful payment",
										"value": {
											"success": true,
											"message": "Payment verified successfully",
											"data": {
												"id": "pay_xyz789abc",
												"paymentId": "PAY_abc123xyz789",
												"jobId": "job_abc123xyz",
												"amount": "₦15,000",
												"currency": "NGN",
												"status": "successful",
												"reference": "PAY_abc123xyz789",
												"createdAt": "2024-10-18T10:00:00.000Z",
												"paidAt": "2024-10-18T10:05:30.000Z",
												"jobTitle": "Kitchen Sink Repair"
											}
										}
									},
									"failed": {
										"summary": "Failed payment",
										"value": {
											"success": true,
											"message": "Payment verification completed",
											"data": {
												"id": "pay_xyz789abc",
												"paymentId": "PAY_abc123xyz789",
												"jobId": "job_abc123xyz",
												"amount": "₦15,000",
												"currency": "NGN",
												"status": "failed",
												"reference": "PAY_abc123xyz789",
												"createdAt": "2024-10-18T10:00:00.000Z",
												"paidAt": null,
												"jobTitle": "Kitchen Sink Repair"
											}
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Invalid reference or payment not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Payment with this reference not found"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/payments/history": {
			"get": {
				"tags": ["Payments"],
				"summary": "Get payment history",
				"description": "Retrieve payment history for authenticated user",
				"security": [{ "BearerAuth": [] }],
				"parameters": [
					{
						"name": "limit",
						"in": "query",
						"schema": { "type": "integer", "default": 10, "minimum": 1, "maximum": 100 },
						"description": "Number of records to return",
						"example": 20
					}
				],
				"responses": {
					"200": {
						"description": "Payment history retrieved",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"data": {
											"type": "array",
											"items": { "$ref": "#/components/schemas/Payment" }
										}
									}
								},
								"example": {
									"success": true,
									"message": "Payment history retrieved successfully",
									"data": [
										{
											"id": "pay_xyz789abc",
											"paymentId": "PAY_abc123xyz789",
											"jobId": "job_abc123xyz",
											"amount": "₦15,000",
											"currency": "NGN",
											"status": "successful",
											"reference": "PAY_abc123xyz789",
											"createdAt": "2024-10-18T10:00:00.000Z",
											"paidAt": "2024-10-18T10:05:30.000Z",
											"jobTitle": "Kitchen Sink Repair"
										},
										{
											"id": "pay_def456uvw",
											"paymentId": "PAY_def456uvw123",
											"jobId": "job_def456uvw",
											"amount": "₦25,000",
											"currency": "NGN",
											"status": "successful",
											"reference": "PAY_def456uvw123",
											"createdAt": "2024-10-15T14:30:00.000Z",
											"paidAt": "2024-10-15T14:35:45.000Z",
											"jobTitle": "House Rewiring"
										},
										{
											"id": "pay_ghi789rst",
											"paymentId": "PAY_ghi789rst456",
											"jobId": "job_ghi789rst",
											"amount": "₦8,500",
											"currency": "NGN",
											"status": "failed",
											"reference": "PAY_ghi789rst456",
											"createdAt": "2024-10-12T09:00:00.000Z",
											"paidAt": null,
											"jobTitle": "Painting Service"
										}
									]
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/payments/banks": {
			"get": {
				"tags": ["Payments"],
				"summary": "Get supported banks",
				"description": "Get list of supported banks for transfers",
				"responses": {
					"200": {
						"description": "Banks retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"data": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"id": { "type": "number" },
													"name": { "type": "string" },
													"code": { "type": "string" }
												}
											}
										}
									}
								},
								"example": {
									"success": true,
									"message": "Banks retrieved successfully",
									"data": [
										{
											"id": 1,
											"name": "Access Bank",
											"code": "044"
										},
										{
											"id": 2,
											"name": "Guaranty Trust Bank",
											"code": "058"
										},
										{
											"id": 3,
											"name": "United Bank for Africa",
											"code": "033"
										},
										{
											"id": 4,
											"name": "Zenith Bank",
											"code": "057"
										},
										{
											"id": 5,
											"name": "First Bank of Nigeria",
											"code": "011"
										}
									]
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/payments/webhook": {
			"post": {
				"tags": ["Payments"],
				"summary": "Paystack webhook",
				"description": "Webhook endpoint for Paystack payment notifications",
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"event": { "type": "string" },
									"data": { "type": "object" }
								}
							},
							"examples": {
								"chargeSuccess": {
									"summary": "Successful charge event",
									"value": {
										"event": "charge.success",
										"data": {
											"id": 302961,
											"domain": "live",
											"status": "success",
											"reference": "PAY_abc123xyz789",
											"amount": 1500000,
											"message": "Approved",
											"gateway_response": "Successful",
											"paid_at": "2024-10-18T10:05:30.000Z",
											"created_at": "2024-10-18T10:00:00.000Z",
											"channel": "card",
											"currency": "NGN",
											"ip_address": "192.168.1.100",
											"metadata": {
												"jobId": "job_abc123xyz",
												"jobTitle": "Kitchen Sink Repair"
											}
										}
									}
								},
								"chargeFailed": {
									"summary": "Failed charge event",
									"value": {
										"event": "charge.failed",
										"data": {
											"id": 302962,
											"domain": "live",
											"status": "failed",
											"reference": "PAY_def456uvw123",
											"amount": 2500000,
											"message": "Declined",
											"gateway_response": "Insufficient Funds",
											"created_at": "2024-10-18T11:00:00.000Z",
											"channel": "card",
											"currency": "NGN"
										}
									}
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Webhook processed successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Webhook processed successfully"
								}
							}
						}
					},
					"400": {
						"description": "Invalid webhook signature or payload",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Invalid webhook signature"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/payments/initialize-subscription": {
			"post": {
				"tags": ["Payments"],
				"summary": "Initialize subscription payment",
				"description": "Initialize a subscription payment for a handyman",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["amount", "plan"],
								"properties": {
									"amount": {
										"type": "number",
										"description": "Subscription amount in Naira"
									},
									"plan": {
										"type": "string",
										"enum": ["monthly", "quarterly", "yearly"],
										"description": "Subscription plan type"
									},
									"metadata": {
										"type": "object",
										"description": "Additional metadata"
									}
								}
							},
							"example": {
								"amount": 5000,
								"plan": "monthly",
								"metadata": {
									"userId": "507f1f77bcf86cd799439011",
									"tier": "premium"
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Payment initialized successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"authorizationUrl": { "type": "string" },
										"accessCode": { "type": "string" },
										"reference": { "type": "string" }
									}
								},
								"example": {
									"success": true,
									"message": "Subscription payment initialized successfully",
									"authorizationUrl": "https://checkout.paystack.com/abc123xyz789",
									"accessCode": "abc123xyz789",
									"reference": "SUB_20241018103000"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/payments/stats": {
			"get": {
				"tags": ["Payments"],
				"summary": "Get payment statistics",
				"description": "Get payment statistics for the authenticated user",
				"security": [{ "BearerAuth": [] }],
				"parameters": [
					{
						"name": "startDate",
						"in": "query",
						"schema": { "type": "string", "format": "date" },
						"description": "Start date for stats (YYYY-MM-DD)"
					},
					{
						"name": "endDate",
						"in": "query",
						"schema": { "type": "string", "format": "date" },
						"description": "End date for stats (YYYY-MM-DD)"
					}
				],
				"responses": {
					"200": {
						"description": "Payment statistics retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"stats": {
											"type": "object",
											"properties": {
												"totalPayments": { "type": "number" },
												"totalAmount": { "type": "number" },
												"successfulPayments": { "type": "number" },
												"failedPayments": { "type": "number" },
												"pendingPayments": { "type": "number" }
											}
										}
									}
								},
								"example": {
									"success": true,
									"stats": {
										"totalPayments": 45,
										"totalAmount": 2450000,
										"successfulPayments": 40,
										"failedPayments": 3,
										"pendingPayments": 2,
										"averageAmount": 54444.44
									}
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/payments/transfer-recipient": {
			"post": {
				"tags": ["Payments"],
				"summary": "Create transfer recipient",
				"description": "Create a transfer recipient for receiving payouts",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["accountNumber", "bankCode", "accountName"],
								"properties": {
									"accountNumber": {
										"type": "string",
										"description": "Bank account number"
									},
									"bankCode": {
										"type": "string",
										"description": "Bank code from /payments/banks"
									},
									"accountName": {
										"type": "string",
										"description": "Account holder name"
									}
								}
							},
							"example": {
								"accountNumber": "0123456789",
								"bankCode": "058",
								"accountName": "Chukwuemeka Okafor"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Transfer recipient created successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"recipientCode": { "type": "string" }
									}
								},
								"example": {
									"success": true,
									"message": "Transfer recipient created successfully",
									"recipientCode": "RCP_abc123xyz789"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/payments/payout-handyman": {
			"post": {
				"tags": ["Payments", "Admin"],
				"summary": "Payout to handyman",
				"description": "Process payout to a handyman (Admin only)",
				"security": [{ "BearerAuth": [] }],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["handymanId", "amount", "reason"],
								"properties": {
									"handymanId": {
										"type": "string",
										"description": "Handyman user ID"
									},
									"amount": {
										"type": "number",
										"description": "Payout amount in Naira"
									},
									"reason": {
										"type": "string",
										"description": "Reason for payout"
									},
									"recipientCode": {
										"type": "string",
										"description": "Transfer recipient code (optional if already saved)"
									}
								}
							},
							"example": {
								"handymanId": "507f1f77bcf86cd799439012",
								"amount": 150000,
								"reason": "Payment for completed job: Kitchen Sink Repair",
								"recipientCode": "RCP_abc123xyz789"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Payout processed successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" },
										"transferCode": { "type": "string" }
									}
								},
								"example": {
									"success": true,
									"message": "Payout processed successfully",
									"transferCode": "TRF_def456uvw123"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"403": {
						"$ref": "#/components/responses/Forbidden"
					}
				}
			}
		},
		"/api/v1/auth/token-info": {
			"get": {
				"tags": ["Authentication"],
				"summary": "Get token information",
				"description": "Decode and retrieve information from the current access token",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Token information retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"tokenInfo": {
											"type": "object",
											"properties": {
												"userId": { "type": "string" },
												"email": { "type": "string" },
												"role": { "type": "string" },
												"iat": { "type": "number" },
												"exp": { "type": "number" },
												"expiresIn": { "type": "string" }
											}
										}
									}
								},
								"example": {
									"success": true,
									"tokenInfo": {
										"userId": "507f1f77bcf86cd799439011",
										"email": "adebayo.olamide@email.com",
										"role": "customer",
										"iat": 1697632200,
										"exp": 1697635800,
										"expiresIn": "59 minutes"
									}
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					}
				}
			}
		},
		"/api/v1/auth/users/stats": {
			"get": {
				"tags": ["Authentication", "Admin"],
				"summary": "Get user statistics",
				"description": "Get overall user statistics (Admin/Public)",
				"responses": {
					"200": {
						"description": "User statistics retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"stats": {
											"type": "object",
											"properties": {
												"totalUsers": { "type": "number" },
												"customers": { "type": "number" },
												"handymen": { "type": "number" },
												"admins": { "type": "number" },
												"verifiedUsers": { "type": "number" },
												"activeUsers": { "type": "number" }
											}
										}
									}
								},
								"example": {
									"success": true,
									"stats": {
										"totalUsers": 1256,
										"customers": 980,
										"handymen": 270,
										"admins": 6,
										"verifiedUsers": 1180,
										"activeUsers": 1100
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/admin/pending-handymen": {
			"get": {
				"tags": ["Admin"],
				"summary": "Get pending handyman approvals",
				"description": "Get list of handymen awaiting approval (Admin only)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Pending handymen retrieved successfully",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"count": { "type": "number" },
										"handymen": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"id": { "type": "string" },
													"email": { "type": "string" },
													"profile": { "type": "object" },
													"createdAt": { "type": "string", "format": "date-time" },
													"isApproved": { "type": "boolean" }
												}
											}
										}
									}
								},
								"example": {
									"success": true,
									"count": 3,
									"handymen": [
										{
											"id": "507f1f77bcf86cd799439015",
											"email": "handyman1@email.com",
											"profile": {
												"firstName": "Emeka",
												"lastName": "Nwankwo",
												"phoneNumber": "+2348123456789",
												"specialty": "Plumbing"
											},
											"createdAt": "2024-10-15T09:30:00.000Z",
											"isApproved": false
										}
									]
								}
							}
						}
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"403": {
						"$ref": "#/components/responses/Forbidden"
					}
				}
			}
		},
		"/api/v1/admin/approve-handyman/{userId}": {
			"post": {
				"tags": ["Admin"],
				"summary": "Approve handyman",
				"description": "Approve a pending handyman registration (Admin only)",
				"security": [{ "BearerAuth": [] }],
				"parameters": [
					{
						"name": "userId",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Handyman user ID"
					}
				],
				"responses": {
					"200": {
						"description": "Handyman approved successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Handyman approved successfully"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"403": {
						"$ref": "#/components/responses/Forbidden"
					},
					"404": {
						"description": "Handyman not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Handyman not found"
								}
							}
						}
					}
				}
			}
		},
		"/api/v1/admin/reject-handyman/{userId}": {
			"post": {
				"tags": ["Admin"],
				"summary": "Reject handyman",
				"description": "Reject a pending handyman registration (Admin only)",
				"security": [{ "BearerAuth": [] }],
				"parameters": [
					{
						"name": "userId",
						"in": "path",
						"required": true,
						"schema": { "type": "string" },
						"description": "Handyman user ID"
					}
				],
				"requestBody": {
					"required": false,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"reason": {
										"type": "string",
										"description": "Reason for rejection"
									}
								}
							},
							"example": {
								"reason": "Incomplete documentation"
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Handyman rejected successfully",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SuccessMessage"
								},
								"example": {
									"success": true,
									"message": "Handyman registration rejected"
								}
							}
						}
					},
					"400": {
						"$ref": "#/components/responses/BadRequest"
					},
					"401": {
						"$ref": "#/components/responses/Unauthorized"
					},
					"403": {
						"$ref": "#/components/responses/Forbidden"
					},
					"404": {
						"description": "Handyman not found",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorResponse"
								},
								"example": {
									"success": false,
									"message": "Handyman not found"
								}
							}
						}
					}
				}
			}
		},
		"/health": {
			"get": {
				"tags": ["Health"],
				"summary": "Health check",
				"description": "Check if API is running",
				"responses": {
					"200": {
						"description": "API is healthy",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"status": { "type": "string", "example": "OK" },
										"message": { "type": "string" },
										"timestamp": { "type": "string", "format": "date-time" }
									}
								},
								"example": {
									"status": "OK",
									"message": "Handyman Management API is running",
									"timestamp": "2024-10-18T10:30:00.000Z"
								}
							}
						}
					}
				}
			}
		}
	},
	"components": {
		"securitySchemes": {
			"BearerAuth": {
				"type": "http",
				"scheme": "bearer",
				"bearerFormat": "JWT",
				"description": "JWT access token from login response"
			}
		},
		"schemas": {
			"RegisterCustomer": {
				"type": "object",
				"required": ["email", "password", "confirmPassword", "role", "profile"],
				"properties": {
					"email": { "type": "string", "format": "email" },
					"password": {
						"type": "string",
						"minLength": 8,
						"pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)"
					},
					"confirmPassword": {
						"type": "string",
						"description": "Must match password"
					},
					"role": { "type": "string", "enum": ["customer"] },
					"profile": {
						"type": "object",
						"required": ["firstName", "lastName"],
						"properties": {
							"firstName": { "type": "string" },
							"lastName": { "type": "string" },
							"phone": { "type": "string" },
							"address": { "type": "string" },
							"preferredContactMethod": {
								"type": "string",
								"enum": ["email", "phone", "sms"]
							}
						}
					}
				}
			},
			"RegisterHandyman": {
				"type": "object",
				"required": ["email", "password", "confirmPassword", "role", "profile"],
				"properties": {
					"email": { "type": "string", "format": "email" },
					"password": {
						"type": "string",
						"minLength": 8,
						"pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)"
					},
					"confirmPassword": {
						"type": "string",
						"description": "Must match password"
					},
					"role": { "type": "string", "enum": ["handyman"] },
					"profile": {
						"type": "object",
						"required": ["firstName", "lastName"],
						"properties": {
							"firstName": { "type": "string" },
							"lastName": { "type": "string" },
							"phone": { "type": "string" },
							"address": { "type": "string" },
							"skills": { "type": "array", "items": { "type": "string" } },
							"experience": { "type": "number" },
							"hourlyRate": { "type": "number" },
							"availability": { "type": "string" },
							"bio": { "type": "string" },
							"certifications": { "type": "array", "items": { "type": "string" } }
						}
					}
				}
			},
			"RegisterAdmin": {
				"type": "object",
				"required": ["email", "password", "confirmPassword", "role", "profile"],
				"properties": {
					"email": { "type": "string", "format": "email" },
					"password": {
						"type": "string",
						"minLength": 8,
						"pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)"
					},
					"confirmPassword": {
						"type": "string",
						"description": "Must match password"
					},
					"role": { "type": "string", "enum": ["admin"] },
					"profile": {
						"type": "object",
						"required": ["firstName", "lastName"],
						"properties": {
							"firstName": { "type": "string" },
							"lastName": { "type": "string" },
							"phone": { "type": "string" },
							"department": { "type": "string" }
						}
					}
				}
			},
			"RegisterResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"message": { "type": "string" },
					"userId": { "type": "string" }
				}
			},
			"LoginRequest": {
				"type": "object",
				"required": ["email", "password"],
				"properties": {
					"email": { "type": "string", "format": "email" },
					"password": { "type": "string" },
					"twoFactorCode": {
						"type": "string",
						"description": "6-digit 2FA code (if enabled)"
					}
				}
			},
			"LoginResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"message": { "type": "string" },
					"user": {
						"type": "object",
						"properties": {
							"id": { "type": "string" },
							"email": { "type": "string" },
							"role": { "type": "string", "enum": ["customer", "handyman", "admin"] },
							"isEmailVerified": { "type": "boolean" },
							"is2FAEnabled": { "type": "boolean" }
						}
					},
					"tokens": {
						"type": "object",
						"properties": {
							"accessToken": { "type": "string" },
							"refreshToken": { "type": "string" }
						}
					},
					"requires2FA": { "type": "boolean" },
					"tempToken": { "type": "string" }
				}
			},
			"ChangePasswordRequest": {
				"type": "object",
				"required": ["currentPassword", "newPassword", "confirmPassword"],
				"properties": {
					"currentPassword": { "type": "string" },
					"newPassword": {
						"type": "string",
						"minLength": 8,
						"pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)"
					},
					"confirmPassword": { "type": "string" }
				}
			},
			"User": {
				"type": "object",
				"properties": {
					"_id": { "type": "string" },
					"email": { "type": "string" },
					"role": { "type": "string", "enum": ["customer", "handyman", "admin"] },
					"profile": { "type": "object" },
					"isEmailVerified": { "type": "boolean" },
					"is2FAEnabled": { "type": "boolean" },
					"isActive": { "type": "boolean" },
					"createdAt": { "type": "string", "format": "date-time" },
					"updatedAt": { "type": "string", "format": "date-time" }
				}
			},
			"Enable2FAResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"secret": { "type": "string" },
					"qrCodeUrl": { "type": "string", "description": "Data URL for QR code image" },
					"backupCodes": {
						"type": "array",
						"items": { "type": "string" },
						"description": "10 single-use backup codes"
					},
					"message": { "type": "string" }
				}
			},
			"Session": {
				"type": "object",
				"properties": {
					"sessionId": { "type": "string" },
					"deviceInfo": { "type": "string" },
					"ipAddress": { "type": "string" },
					"lastActivity": { "type": "string", "format": "date-time" },
					"createdAt": { "type": "string", "format": "date-time" }
				}
			},
			"SuccessMessage": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"message": { "type": "string" }
				}
			},
			"ErrorResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean", "example": false },
					"message": { "type": "string" }
				}
			},
			"InitializePaymentRequest": {
				"type": "object",
				"required": ["jobId", "amount", "description"],
				"properties": {
					"jobId": { "type": "string", "description": "Job ID" },
					"amount": { "type": "number", "minimum": 100, "description": "Amount in NGN (minimum ₦1.00 = 100 kobo)" },
					"description": { "type": "string", "maxLength": 500 },
					"metadata": {
						"type": "object",
						"description": "Additional metadata"
					}
				}
			},
			"PaymentInitResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"message": { "type": "string" },
					"data": {
						"type": "object",
						"properties": {
							"id": { "type": "string" },
							"reference": { "type": "string" },
							"accessCode": { "type": "string" },
							"authorizationUrl": { "type": "string", "description": "Paystack checkout URL" },
							"amount": { "type": "number" },
							"currency": { "type": "string", "example": "NGN" },
							"status": { "type": "string", "enum": ["pending", "successful", "failed"] }
						}
					}
				}
			},
			"PaymentVerifyResponse": {
				"type": "object",
				"properties": {
					"success": { "type": "boolean" },
					"message": { "type": "string" },
					"data": {
						"$ref": "#/components/schemas/Payment"
					}
				}
			},
			"Payment": {
				"type": "object",
				"properties": {
					"id": { "type": "string" },
					"paymentId": { "type": "string" },
					"jobId": { "type": "string" },
					"amount": { "type": "string", "description": "Formatted amount (e.g., ₦5,000)" },
					"currency": { "type": "string", "example": "NGN" },
					"status": { "type": "string", "enum": ["pending", "successful", "failed", "reversed", "cancelled"] },
					"reference": { "type": "string" },
					"createdAt": { "type": "string", "format": "date-time" },
					"paidAt": { "type": "string", "format": "date-time" },
					"jobTitle": { "type": "string" }
				}
			}
		},
		"responses": {
			"BadRequest": {
				"description": "Bad request or validation error",
				"content": {
					"application/json": {
						"schema": {
							"$ref": "#/components/schemas/ErrorResponse"
						},
						"examples": {
							"validationError": {
								"summary": "Validation error",
								"value": {
									"success": false,
									"message": "Validation failed: email must be a valid email address"
								}
							},
							"missingField": {
								"summary": "Missing required field",
								"value": {
									"success": false,
									"message": "Missing required field: password"
								}
							}
						}
					}
				}
			},
			"Unauthorized": {
				"description": "Unauthorized - Invalid or expired token",
				"content": {
					"application/json": {
						"schema": {
							"$ref": "#/components/schemas/ErrorResponse"
						},
						"examples": {
							"noToken": {
								"summary": "No token provided",
								"value": {
									"success": false,
									"message": "No token provided"
								}
							},
							"invalidToken": {
								"summary": "Invalid token",
								"value": {
									"success": false,
									"message": "Invalid or expired token"
								}
							},
							"expiredToken": {
								"summary": "Expired token",
								"value": {
									"success": false,
									"message": "Token has expired"
								}
							}
						}
					}
				}
			},
			"Forbidden": {
				"description": "Forbidden - Insufficient permissions",
				"content": {
					"application/json": {
						"schema": {
							"$ref": "#/components/schemas/ErrorResponse"
						},
						"example": {
							"success": false,
							"message": "You do not have permission to perform this action"
						}
					}
				}
			},
			"Conflict": {
				"description": "Conflict - Resource already exists",
				"content": {
					"application/json": {
						"schema": {
							"$ref": "#/components/schemas/ErrorResponse"
						},
						"example": {
							"success": false,
							"message": "Resource already exists"
						}
					}
				}
			},
			"TooManyRequests": {
				"description": "Too many requests - Rate limit exceeded",
				"content": {
					"application/json": {
						"schema": {
							"$ref": "#/components/schemas/ErrorResponse"
						},
						"example": {
							"success": false,
							"message": "Too many requests. Please try again later."
						}
					}
				}
			}
		}
	}
}
